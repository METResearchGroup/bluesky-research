{{ define "slack.title" }}
[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .CommonLabels.alertname }}
{{ end }}

{{ define "slack.text" }}
{{ range .Alerts }}
*Alert:* {{ .Annotations.summary }}
*Description:* {{ .Annotations.description }}
*Severity:* {{ .Labels.severity }}
*Started:* {{ .StartsAt | since }}
{{ if .Labels.instance }}*Instance:* {{ .Labels.instance }}{{ end }}
{{ if .Annotations.value }}*Current Value:* {{ .Annotations.value }}{{ end }}
{{ end }}
{{ end }}

{{ define "slack.critical.text" }}
üö® *CRITICAL ALERT* üö®

{{ range .Alerts }}
*Alert:* {{ .Annotations.summary }}
*Description:* {{ .Annotations.description }}
*Started:* {{ .StartsAt | since }}
{{ if .Labels.instance }}*Instance:* {{ .Labels.instance }}{{ end }}
{{ if .Annotations.value }}*Current Value:* {{ .Annotations.value }}{{ end }}

*Immediate Actions Required:*
‚Ä¢ Investigate the issue immediately
‚Ä¢ Check Redis logs and metrics
‚Ä¢ Review system resources
‚Ä¢ Consider rolling back recent changes

*Escalation:* This alert will escalate in 15 minutes if not acknowledged.
{{ end }}
{{ end }}

{{ define "slack.warning.text" }}
‚ö†Ô∏è *WARNING ALERT* ‚ö†Ô∏è

{{ range .Alerts }}
*Alert:* {{ .Annotations.summary }}
*Description:* {{ .Annotations.description }}
*Started:* {{ .StartsAt | since }}
{{ if .Labels.instance }}*Instance:* {{ .Labels.instance }}{{ end }}
{{ if .Annotations.value }}*Current Value:* {{ .Annotations.value }}{{ end }}

*Recommended Actions:*
‚Ä¢ Monitor the situation
‚Ä¢ Check Redis metrics
‚Ä¢ Review recent activity
‚Ä¢ Prepare for potential escalation
{{ end }}
{{ end }}

{{ define "slack.info.text" }}
‚ÑπÔ∏è *INFO ALERT* ‚ÑπÔ∏è

{{ range .Alerts }}
*Alert:* {{ .Annotations.summary }}
*Description:* {{ .Annotations.description }}
*Started:* {{ .StartsAt | since }}
{{ if .Labels.instance }}*Instance:* {{ .Labels.instance }}{{ end }}
{{ if .Annotations.value }}*Current Value:* {{ .Annotations.value }}{{ end }}

*Information:*
‚Ä¢ Review the information
‚Ä¢ Check related metrics
‚Ä¢ Update documentation if needed
‚Ä¢ Share insights with team
{{ end }}
{{ end }}

{{ define "slack.grafana_url" }}
http://localhost:3000/d/redis/redis-monitoring?orgId=1&refresh=5s
{{ end }}

{{ define "slack.alertmanager_url" }}
http://localhost:9093/#/alerts
{{ end }}

{{ define "slack.acknowledge_url" }}
http://localhost:9093/#/alerts?silenced=false&inhibited=false&active=true&filter=%7Balertname%3D"{{ .CommonLabels.alertname }}"%7D
{{ end }}
